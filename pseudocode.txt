main
    open queue

    fork to create children with msg queue id

    if parent
        run server
        close queue

    exit


server
    [thread 1]
    while the program is running
        if a filename is read from message queue
            add the pid to queue
    
    [thread 2]
    while the program is running
        if the queue is not empty
            loop throught the queue and serve one packet
            if the current file is done remove pid from queue



client(qid)
    get pid
    get filename from user
    create message buffer
    write filename to msg and pid to msg queue with mtype 1
    
    while reading from msg queue doesnt return an error
        save message to buffer
        display buffer
    